define("tiny_media/imagedragdrop",["exports","./selectors","./common","core/str","core/prefetch"],(function(_exports,_selectors,_common,_str,_prefetch){var obj;
/**
   * Tiny media plugin image drag and drop class for Moodle.
   *
   * @module      tiny_media/imagedragdrop
   * @copyright   2024 Meirza <meirza.arson@moodle.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_selectors=(obj=_selectors)&&obj.__esModule?obj:{default:obj},(0,_prefetch.prefetchStrings)("tiny_media",["draganddrop","droptoupload"]);return _exports.default=class{constructor(root,canShowFilePicker,handleUploadedFile){this.canShowFilePicker=canShowFilePicker,this.handleUploadedFile=handleUploadedFile,this.dropZoneEle=root.querySelector(_selectors.default.IMAGE.elements.dropzone),this.dropzoneLabelEle=root.querySelector(_selectors.default.IMAGE.elements.dropzoneLabel),this.dropzoneIconEle=root.querySelector(_selectors.default.IMAGE.elements.dropzoneIcon),this.dropZoneLabelIconEle=root.querySelector(_selectors.default.IMAGE.elements.dropzoneIconLabel),this.fileInput=root.querySelector(_selectors.default.IMAGE.elements.fileInput)}async init(){const langStringKeys=["draganddrop","droptoupload"],langStringvalues=await(0,_str.getStrings)([...langStringKeys].map((key=>({key:key,component:_common.component}))));this.langStrings=Object.fromEntries(langStringKeys.map(((key,index)=>[key,langStringvalues[index]]))),await this.addEventListeners()}async addEventListeners(){this.canShowFilePicker&&(this.dropZoneEle.addEventListener("dragover",(e=>{e.preventDefault(),this.dropzoneLabelEle.innerHTML=this.langStrings.droptoupload,this.dropzoneIconEle.classList.add("text-primary"),this.dropzoneIconEle.classList.remove("text-secondary")})),this.dropZoneEle.addEventListener("dragleave",(()=>{this.dropzoneLabelEle.innerHTML=this.langStrings.draganddrop,this.dropzoneIconEle.classList.add("text-secondary"),this.dropzoneIconEle.classList.remove("text-primary")})),this.dropZoneEle.addEventListener("drop",(e=>{e.preventDefault(),this.handleUploadedFile(e.dataTransfer.files),this.dropzoneLabelEle.innerHTML=this.langStrings.draganddrop,this.dropzoneIconEle.classList.add("text-secondary"),this.dropzoneIconEle.classList.remove("text-primary")})),this.dropZoneLabelIconEle.addEventListener("click",(()=>{this.fileInput.click()})))}},_exports.default}));

//# sourceMappingURL=imagedragdrop.min.js.map