define("core/accessibility/live_announcer",["exports","core/modal_events"],(function(_exports,_modal_events){var obj;function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_modal_events=(obj=_modal_events)&&obj.__esModule?obj:{default:obj};const SELECTORS_announcer="liveannouncer";class LiveAnnouncer{constructor(){_defineProperty(this,"handleModalShown",(event=>{const newAnnouncerId="".concat(SELECTORS_announcer).concat(this.announcerCount),newAnnouncer=document.createElement("div");newAnnouncer.setAttribute("id",newAnnouncerId),newAnnouncer.setAttribute("aria-live","polite"),newAnnouncer.setAttribute("aria-atomic","true"),newAnnouncer.className="visually-hidden";const modalFooter=event.target.querySelector(".modal-footer");modalFooter&&(modalFooter.appendChild(newAnnouncer),this.currentAnnouncer=newAnnouncer,this.announcerIds.push(newAnnouncerId),this.announcerCount++)})),_defineProperty(this,"handleModalHidden",(()=>{this.announcerIds.pop();const lastAnnouncerId=this.announcerIds.at(-1);this.currentAnnouncer=lastAnnouncerId?document.getElementById(lastAnnouncerId):null})),this.toggleSuffix=!1,this.currentAnnouncer=null,this.announcerCount=1,this.announcerIds=["".concat(SELECTORS_announcer,"0")],this.currentAnnouncer=document.getElementById(this.announcerIds[0]),this.registerEvents()}static init(){this.isInitialized||(this.isInitialized=!0,new this)}registerEvents(){document.addEventListener(_modal_events.default.shown,this.handleModalShown),document.addEventListener(_modal_events.default.hidden,this.handleModalHidden)}updateAnnouncer(message){let reAnnouncement=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.currentAnnouncer)return;let suffix="";reAnnouncement&&(suffix=this.toggleSuffix?".":"",this.toggleSuffix=!this.toggleSuffix),this.currentAnnouncer.textContent="".concat(message).concat(suffix)}}_defineProperty(LiveAnnouncer,"isInitialized",!1);var _default=new LiveAnnouncer;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=live_announcer.min.js.map